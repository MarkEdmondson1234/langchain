The code defines a content handler class `EmbeddingsContentHandler` that wraps around the Sagemaker InvokeEndpoint API. The class is a subclass of `ContentHandlerBase` and takes in a list of strings as input and returns a list of lists of floats as output. The code imports necessary packages and defines the `Embeddings` base class. The `root_validator` decorator is used to validate that the necessary environment variables and packages exist.

The code defines a wrapper class `SagemakerEndpointEmbeddings` around custom Sagemaker inference endpoints. The class takes in the endpoint name and region where the Sagemaker model is deployed, and optionally a credential profile name from the `~/.aws/credentials` file. The class also includes a content handler class that provides input and output transform functions to handle formats between LLM and the endpoint. The code imports necessary packages and defines the `Embeddings` base class. The `root_validator` decorator is used to validate that the necessary environment variables and packages exist.

The code defines a wrapper class `SagemakerEndpointEmbeddings` around custom Sagemaker inference endpoints. The class takes in the endpoint name and region where the Sagemaker model is deployed, and optionally a credential profile name from the `~/.aws/credentials` file. The class also includes a content handler class that provides input and output transform functions to handle formats between LLM and the endpoint. The code imports necessary packages and defines the `Embeddings` base class. The `root_validator` decorator is used to validate that the necessary environment variables and packages exist. The class includes three functions: `_embedding_func`, `embed_documents`, and `embed_query`. `_embedding_func` is a private function that calls out to the SageMaker Inference embedding endpoint. `embed_documents` computes document embeddings using a SageMaker Inference Endpoint, and takes in a list of texts to embed and an optional chunk size. `embed_query` computes query embeddings using a SageMaker inference endpoint, and takes in a text to embed. Both functions return embeddings as outputs. The code includes a root validator that validates that the necessary environment variables and packages exist.

