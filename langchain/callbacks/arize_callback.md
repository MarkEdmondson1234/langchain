This code imports necessary packages for ingestion, including `uuid`, `typing`, `pandas`, `langchain.callbacks.base`, and `langchain.schema`. It defines several classes, including `BaseCallbackHandler`, `AgentAction`, `AgentFinish`, and `LLMResult`. There are no functions defined in this code.

This code defines a callback handler called `ArizeCallbackHandler` that logs data to the Arize platform. The handler has several methods, including `on_llm_start`, `on_llm_new_token`, and `on_llm_end`, which are called during the different stages of the LLM process. The handler initializes several variables, including `model_id`, `model_version`, `SPACE_KEY`, `API_KEY`, `prompt_records`, `response_records`, `prediction_ids`, `pred_timestamps`, `response_embeddings`, `prompt_embeddings`, `prompt_tokens`, `completion_tokens`, and `total_tokens`. The code imports several packages and modules, including `uuid`, `typing`, `pandas`, `arize.api`, and `arize.pandas.embeddings`.

This code defines a callback handler called `ArizeCallbackHandler` that logs data to the Arize platform. The handler has several methods, including `on_llm_start`, `on_llm_new_token`, and `on_llm_end`, which are called during the different stages of the LLM process. The handler initializes several variables, including `model_id`, `model_version`, `SPACE_KEY`, `API_KEY`, `prompt_records`, `response_records`, `prediction_ids`, `pred_timestamps`, `response_embeddings`, `prompt_embeddings`, `prompt_tokens`, `completion_tokens`, and `total_tokens`. The code imports several packages and modules, including `uuid`, `typing`, `pandas`, `arize.api`, and `arize.pandas.embeddings`. The `on_llm_end` method logs the prompt-response pairs and other necessary data to the Arize platform using the `arize_client.log` method.

